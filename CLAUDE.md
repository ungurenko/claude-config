# Основные правила

Всегда отвечай на русском языке.
Используй Context7 MCP для документации библиотек/API без явной просьбы пользователя.

## Поиск в интернете

НИКОГДА не используй встроенные инструменты WebSearch и WebFetch.
Вместо них ВСЕГДА используй Exa MCP:
- `web_search_exa` — для любого веб-поиска
- `get_code_context_exa` — для поиска кода, документации, примеров
- `company_research_exa` — для информации о компаниях

## Ключевые правила при работе

- **Ошибка/баг:** используй скилл `systematic-debugging`, не угадывай причину
- **UI/компонент:** используй скилл `frontend-design`, не пиши код сразу
- **Новая фича:** сначала `get_code_context_exa` для best practices, покажи 2-3 подхода, потом код
- **API/бэкенд:** предложи агента `backend-architect`
- **Медленные запросы БД:** предложи агента `database-optimization`

## Краткие технические правила

- **Vercel + Vite:** bracket-роуты `[param].ts` могут не работать (405) — используй URL parsing + rewrites
- **Express.js:** `req.query` read-only — используй `Object.defineProperty` для перезаписи
- **HTTP заголовки:** только ASCII символы (кириллица крашит сервер)
- **LLM JSON:** всегда очищай markdown-обёртку (` ```json `) перед `JSON.parse`
- **LLM инструкции:** клиентский config не должен полностью заменять системные инструкции
- **Auth:** передавай токены во ВСЕХ компонентах, обрабатывай 401

Подробные примеры и код: см. `~/claude-config/technical-rules.md`

## CCBot (Telegram-бот для управления Claude Code)

В статус-лайне отображается индикатор ccbot: `● ccbot` (работает), `○ ccbot` (сессия есть, процесс не активен), `✗ ccbot` (не запущен).

Если пользователь просит запустить/перезапустить ccbot:
- **Запуск:** `bash ~/Documents/Вайб-кодинг/ccbot/scripts/start.sh` — идемпотентный, безопасно вызывать повторно
- **Перезапуск:** `bash ~/Documents/Вайб-кодинг/ccbot/scripts/restart.sh` — останавливает и запускает заново
- **Проверка статуса:** `/opt/homebrew/bin/tmux has-session -t ccbot 2>/dev/null && echo "running" || echo "stopped"`
- **Логи автозапуска:** `/tmp/ccbot-autostart.log`
- **Код проекта:** `~/Documents/Вайб-кодинг/ccbot/`

## Критические требования

Когда пользователь говорит "критически важно" — держи это в фокусе всю сессию.
Перед каждым изменением проверяй: не сломает ли это критическое требование?

## Скиллы и синхронизация

**Создание новых скиллов:**
- Создавай скиллы ВСЕГДА в `~/claude-config/skills/<имя>/SKILL.md`
- После создания — сделай симлинк: `ln -s ~/claude-config/skills/<имя> ~/.claude/skills/<имя>`
- Закоммить и запушь: `cd ~/claude-config && git add . && git commit -m "Add: скилл <имя>" && git push`

**Автосинхронизация:**
- Каждые 5 минут скрипт `autosync` автоматически: находит новые скиллы, перемещает в репо, создаёт симлинки, коммитит и пушит
- Это страховочная сеть — лучше коммитить и пушить сразу вручную

**Редактирование файлов в `~/claude-config/`:**
- После любого редактирования — коммить и пушь:
  `cd ~/claude-config && git add . && git commit -m "Update: описание" && git push`
