# Руководство по синхронизации Claude Code

**Как держать настройки Claude Code одинаковыми на всех компьютерах**

---

## Что такое симлинки?

**Симлинк (символическая ссылка)** — это как ярлык на рабочем столе, только для файлов в терминале.

```
Обычный файл:          Симлинк:
┌─────────────┐        ┌─────────────┐
│  Документ  │        │   Ярлык  →  │──────→ Документ
└─────────────┘        └─────────────┘
  (данные тут)           (указывает)         (данные тут)
```

**Зачем это нужно?**

Claude Code ищет настройки в `~/.claude/CLAUDE.md`. Но мы хотим хранить их в git-репозитории. Симлинк решает эту проблему:

```
~/.claude/CLAUDE.md  →  ~/claude-config/CLAUDE.md
      ↑                           ↑
Claude Code                  Git-репозиторий
читает отсюда                (можно пушить/пуллить)
```

---

## Как работает синхронизация

### Схема потока данных

```
┌─────────────────────────────────────────────────────────────────┐
│                           GitHub                                 │
│                    github.com/user/claude-config                │
└─────────────────────────────────────────────────────────────────┘
                    ↑               ↑               ↑
                git push        git push        git push
                    │               │               │
           ┌────────┴───────┐ ┌────┴────┐ ┌───────┴────────┐
           │    MacBook     │ │   iMac  │ │  Другой Mac    │
           │ ~/claude-config│ │ ~/claude│ │  ~/claude-     │
           │                │ │ -config │ │   config       │
           └────────┬───────┘ └────┬────┘ └───────┬────────┘
                    │              │              │
              симлинки        симлинки       симлинки
                    │              │              │
           ┌────────┴───────┐ ┌────┴────┐ ┌───────┴────────┐
           │ ~/.claude/     │ │~/.claude│ │  ~/.claude/    │
           │ CLAUDE.md      │ │/CLAUDE  │ │  CLAUDE.md     │
           └────────────────┘ └─────────┘ └────────────────┘
```

### Принцип работы

1. **Реальные файлы** живут в `~/claude-config/` (git-репозиторий)
2. **Симлинки** в `~/.claude/` указывают на реальные файлы
3. **Claude Code** читает через симлинки, не зная об этом
4. **Git** синхронизирует между компьютерами

---

## Пошаговые сценарии

### Сценарий 1: Первая установка на новом компьютере

**Ситуация:** Купил новый Mac, нужно получить все настройки Claude Code.

```bash
# 1. Клонируем репозиторий
git clone https://github.com/ungurenko/claude-config.git ~/claude-config

# 2. Заходим в папку
cd ~/claude-config

# 3. Делаем скрипт исполняемым
chmod +x install.sh

# 4. Запускаем установку
./install.sh
```

**Что делает install.sh:**
- Создаёт папку `~/.claude/` если её нет
- Создаёт симлинки для всех файлов
- Показывает статус установки

**Проверка:**
```bash
ls -la ~/.claude/CLAUDE.md
# Должно показать: CLAUDE.md -> /Users/.../claude-config/CLAUDE.md
```

---

### Сценарий 2: Изменил настройки — нужно запушить

**Ситуация:** Добавил новый скилл или поправил CLAUDE.md.

```bash
# 1. Переходим в репозиторий
cd ~/claude-config

# 2. Смотрим что изменилось
git status

# 3. Добавляем все изменения
git add .

# 4. Коммитим с описанием
git commit -m "Add: новый скилл для работы с API"

# 5. Пушим на GitHub
git push
```

**Или одной командой:**
```bash
cd ~/claude-config && git add . && git commit -m "Update: описание" && git push
```

---

### Сценарий 3: Получить изменения на другом компьютере

**Ситуация:** Работал на MacBook, теперь сижу за iMac. Нужны свежие настройки.

```bash
# 1. Переходим в репозиторий
cd ~/claude-config

# 2. Подтягиваем изменения
git pull

# Готово! Симлинки автоматически видят новые файлы.
```

**Важно:** Не нужно заново запускать install.sh — симлинки уже настроены и указывают на правильные файлы.

---

## Структура репозитория

```
~/claude-config/
├── CLAUDE.md              # Глобальные инструкции
├── agent.md               # Правила поведения
├── install.sh             # Скрипт установки
├── README.md              # Описание репозитория
├── docs/
│   ├── guide.md           # Это руководство
│   └── guide.pdf          # PDF-версия
├── skills/
│   ├── kie-ai/
│   │   └── SKILL.md       # Скилл для Kie.ai
│   └── polza-ai/
│       └── SKILL.md       # Скилл для Polza.ai
└── agents/
    ├── backend-architect.md
    ├── database-optimization.md
    └── debugger.md
```

---

## Памятка команд

| Действие | Команда |
|----------|---------|
| **Первая установка** | `git clone ... && ./install.sh` |
| **Изменил → запушил** | `git add . && git commit -m "..." && git push` |
| **Получить изменения** | `git pull` |
| **Проверить статус** | `git status` |
| **Посмотреть симлинки** | `ls -la ~/.claude/` |
| **История изменений** | `git log --oneline` |

---

## FAQ

### Что если я изменю файл напрямую в ~/.claude/?

Это изменит файл в репозитории (через симлинк). Можно спокойно редактировать — git увидит изменения.

### Что если симлинк сломался?

Запустите `./install.sh` заново — скрипт пересоздаст симлинки.

### Как откатить изменения?

```bash
cd ~/claude-config
git checkout -- имя_файла.md
```

### Можно ли использовать на Windows?

Да, но симлинки работают иначе. Используйте WSL или Git Bash с правами администратора.

### Что если на двух компьютерах разные версии?

Git покажет конфликт при pull. Решите его вручную или:
```bash
git stash        # Спрятать локальные изменения
git pull         # Получить новые
git stash pop    # Вернуть спрятанное
```

### Как добавить новый скилл?

1. Создайте папку: `mkdir -p skills/my-skill`
2. Создайте файл: `skills/my-skill/SKILL.md`
3. Запустите `./install.sh` (создаст симлинк)
4. Закоммитьте и запушьте

---

## Визуальная схема воркфлоу

```
╔═══════════════════════════════════════════════════════════════════╗
║                    ЕЖЕДНЕВНЫЙ ВОРКФЛОУ                            ║
╠═══════════════════════════════════════════════════════════════════╣
║                                                                    ║
║   ┌──────────────┐                      ┌──────────────┐          ║
║   │  Утро iMac   │                      │ Вечер MacBook│          ║
║   └──────┬───────┘                      └──────┬───────┘          ║
║          │                                      │                  ║
║          ▼                                      ▼                  ║
║   ┌──────────────┐                      ┌──────────────┐          ║
║   │  git pull    │                      │  git pull    │          ║
║   │  (получить)  │                      │  (получить)  │          ║
║   └──────┬───────┘                      └──────┬───────┘          ║
║          │                                      │                  ║
║          ▼                                      ▼                  ║
║   ┌──────────────┐                      ┌──────────────┐          ║
║   │   Работа     │                      │   Работа     │          ║
║   │  с Claude    │                      │  с Claude    │          ║
║   └──────┬───────┘                      └──────┬───────┘          ║
║          │                                      │                  ║
║          ▼                                      ▼                  ║
║   ┌──────────────┐                      ┌──────────────┐          ║
║   │ Редактирую   │                      │ Редактирую   │          ║
║   │  настройки   │                      │  настройки   │          ║
║   └──────┬───────┘                      └──────┬───────┘          ║
║          │                                      │                  ║
║          ▼                                      ▼                  ║
║   ┌──────────────┐                      ┌──────────────┐          ║
║   │  git add .   │                      │  git add .   │          ║
║   │  git commit  │                      │  git commit  │          ║
║   │  git push    │                      │  git push    │          ║
║   └──────────────┘                      └──────────────┘          ║
║                                                                    ║
║          │                                      │                  ║
║          └──────────────┬───────────────────────┘                  ║
║                         ▼                                          ║
║                  ┌─────────────┐                                   ║
║                  │   GitHub    │                                   ║
║                  │  (хранит    │                                   ║
║                  │   историю)  │                                   ║
║                  └─────────────┘                                   ║
║                                                                    ║
╚═══════════════════════════════════════════════════════════════════╝
```

---

*Документ создан для репозитория claude-config*
